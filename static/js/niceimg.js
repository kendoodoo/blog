const strtobytes=a=>new Blob([a]).size;function getSize(a){return Math.round(strtobytes(a)/Math.pow(1024,1))}function getBase64Image(a,b,c,d){if(!a)return alert("invalid image file"),!1;if("heic"==a)return alert("not supported"),!1;const e=new Image;e.crossOrigin="Anonymous",e.onload=()=>{const a=document.createElement("canvas");a.height=e.naturalHeight,a.width=e.naturalWidth,a.getContext("2d").drawImage(e,0,0),2500<e.naturalWidth?d(a.toDataURL("image/webp",.002)):2e3<e.naturalWidth?d(a.toDataURL("image/webp",.006)):1500<e.naturalWidth?d(a.toDataURL("image/webp",.09)):d(a.toDataURL("image/webp",.23))},e.src=b,(e.complete||e.complete===void 0)&&(e.src="",e.src=b)}window.File&&window.FileReader&&window.FileList&&window.Blob?document.getElementById("files").addEventListener("change",handleFileSelect,!1):alert("fuck");var data;function handleFileSelect(a){var b=a.target.files[0];console.log(b);var c=new FileReader;c.onload=function(){return function(a){var c=a.target.result,d=window.btoa(c);getBase64Image(b.name.split(".")[1].trim(),`data:image/webp;base64,${d}`,b,function(a){quill.clipboard.dangerouslyPasteHTML(parseInt(quill.getText().length),`<br><img src="${a}" width="400">`)})}}(b),c.readAsBinaryString(b)}
